apiVersion: ops.chenshaowen.com/v1
kind: Task
metadata:
  name: task-sample
  namespace: default
spec:
  desc: Opscli Auto Completion
  steps:
    - name: CentOS
      script: yum install bash-completion -y;
        echo "" >>~/.bashrc;
        echo "source /usr/share/bash-completion/bash_completion" >>~/.bashrc;
        echo "source <(opscli completion bash)" >>~/.bashrc;
        source ~/.bashrc;
      when: ${os} == centos
    - name: Ubuntu
      script: apt-get install bash-completion -y;
        echo "" >>~/.bashrc;
        echo "source /usr/share/bash-completion/bash_completion" >>~/.bashrc;
        echo "source <(opscli completion bash)" >>~/.bashrc;
        source ~/.bashrc;
      when: ${os} == ubuntu
