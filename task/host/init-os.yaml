apiVersion: ops.chenshaowen.com/v1
kind: Task
metadata:
  name: task-sample
  namespace: default
spec:
  desc: InitOS
  steps:
  - name: Set TimeZone
    script: timedatectl set-timezone Asia/Shanghai
  - name: Close Selinux
    script: systemctl stop firewalld && systemctl disable firewalld ;
      sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config ;
  - name: Clear History
    script: history -c ;
      echo "" > /root/.bash_history
  - name: Clear Log
    script: cd /var/log/;
      echo "" > dmesg;
      chattr -a /var/log/messages;
      echo "" > messages;
      chattr +a /var/log/messages;
      rm -f cron-* maillog-*  boot.log-*  btmp-* messages-*  spooler-*  secure-*  wtmp-*  dmesg.old;
