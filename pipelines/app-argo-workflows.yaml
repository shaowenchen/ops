apiVersion: crd.chenshaowen.com/v1
kind: Pipeline
metadata:
  name: app-argo-workflows
  namespace: ops-system
spec:
  desc: 安装、卸载 argo workflows 组件
  variables:
    cluster:
      required: true
    argo-cli-image:
      required: true
      default: registry.cn-hangzhou.aliyuncs.com/opshub/argoproj-argocli:v3.5.5
    argo-workflow-image:
      required: true
      default: registry.cn-hangzhou.aliyuncs.com/opshub/argoproj-workflow-controller:v3.5.5
    action:
      required: true
      default: apply
  tasks:
    - name: argo-workflows
      taskRef: app-argo-workflows
