apiVersion: crd.chenshaowen.com/v1
kind: Pipeline
metadata:
  name: app-volcano
  namespace: ops-system
spec:
  desc: 安装、卸载 volcano 组件
  variables:
    cluster:
      required: true
    volcano-scheduler-image:
      required: true
      default: registry.cn-hangzhou.aliyuncs.com/opshub/volcanosh-vc-scheduler:v1.7.0
    volcano-controller-image:
      required: true
      default: registry.cn-hangzhou.aliyuncs.com/opshub/volcanosh-vc-controller-manager:v1.7.0
    action:
      required: true
      default: apply
  tasks:
    - name: npu-exporter
      taskRef: app-npu-exporter
