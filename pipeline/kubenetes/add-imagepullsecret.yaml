name: Create Pull Image Secret
variables:
  secret_server: ""
  secret_username: ""
  secret_password: ""
  secret_name: mysecret
  secret_namespace: default
  clear: false
steps:
  - name: Create Pull Image Secret
    script: kubectl create secret docker-registry ${secret_name} --docker-server=${secret_server} --docker-username=${secret_username} --docker-password=${secret_password} -n ${secret_namespace}
    when: ${clear} == "false"
  - name: Delete Pull Image Secret
    script: kubectl delete secret ${secret_name} -n ${secret_namespace}
    when: ${clear} == "true"
